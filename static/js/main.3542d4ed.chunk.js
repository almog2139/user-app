(this["webpackJsonpmister-toy"]=this["webpackJsonpmister-toy"]||[]).push([[0],{55:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(20),i=n.n(s),o=(n(55),n(5)),l=n(16),u=n(15),d=n(21),m=n(4),j=n(18);function p(e){var t=e.onSetFilter,n=Object(a.useState)({name:"",location:"",id:"",email:""}),c=Object(j.a)(n,2),s=c[0],i=c[1];Object(a.useEffect)((function(){t(Object(m.a)({},s))}),[s]);var o=function(e){var t="number"===e.target.type?+e.target.value:e.target.value,n=e.target.name;i((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(d.a)({},n,t))}))};return Object(r.jsxs)("div",{className:"user-filter",children:[Object(r.jsx)("input",{type:"text",placeholder:"Search first/last:",value:s.name,name:"name",onChange:o,autoFocus:!0}),Object(r.jsx)("input",{type:"text",placeholder:"Search User By Id",value:s.id,name:"id",onChange:o}),Object(r.jsx)("input",{type:"email",placeholder:"Search User By Email",value:s.email,name:"email",onChange:o}),Object(r.jsx)("input",{type:"location",placeholder:"Search User By Location",value:s.location,name:"location",onChange:o})]})}var b={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}};var f=n(45),h=n.n(f),v=n(46),O=n.n(v),x=n.p+"static/media/user.c905095b.png";function g(e){var t,n,a,c=e.user,s=e.onDeleteUser,i=(null===(t=c.picture)||void 0===t?void 0:t.medium)?null===(n=c.picture)||void 0===n?void 0:n.large:x;return Object(r.jsxs)("div",{className:"card-grid",children:[Object(r.jsx)(u.b,{style:{width:"100%"},to:"/user/".concat(c._id),children:Object(r.jsxs)("div",{className:"user-details flex space-around align-center",children:[Object(r.jsx)("img",{src:i}),(null===(a=c.id)||void 0===a?void 0:a.value)&&Object(r.jsxs)("p",{children:["Id :",c.id.value]})]})}),Object(r.jsxs)("h2",{className:"m-t-10",children:[c.name.title.toUpperCase()," ",c.name.first," ",c.name.last]}),Object(r.jsxs)("p",{className:"m-t-10",children:["Email :",c.email]}),Object(r.jsx)("div",{className:"user-location m-t-10",children:Object(r.jsxs)("small",{children:["Location : ",c.location.country," ,",c.location.city," ,",c.location.street.name,c.location.street.number]})}),Object(r.jsxs)("div",{className:"buttons flex align-items space-around",children:[Object(r.jsx)(h.a,{onClick:function(){return s(c._id)}}),Object(r.jsx)(u.b,{className:"btn",to:"/user/edit/".concat(c._id),children:Object(r.jsx)(O.a,{className:"user-edit relative"})})]})]})}function y(e){var t=e.users,n=e.onDeleteUser;return Object(r.jsx)("div",{className:"card-continer",children:null===t||void 0===t?void 0:t.map((function(e){return Object(r.jsx)(g,{user:e,onDeleteUser:n},b.makeId())}))})}var w=n(3),N=n.n(w),S=n(22),E=n(8),k=n(47),C=n.n(k),_={store:function(e,t){localStorage[e]=JSON.stringify(t)},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage[e];return n?JSON.parse(n):t},clear:function(){localStorage.clear()}};var U={query:function(e){return B.apply(this,arguments)},removeUser:function(e){return D.apply(this,arguments)},_loadUsers:R,getUsers:F,getById:function(e){return W.apply(this,arguments)},getEmptyUser:function(){return{name:{title:"",first:"",last:""},location:{street:{number:0,name:""},city:"",country:""},email:""}},save:function(e){return P.apply(this,arguments)}},T="users",L=R();function R(){return I.apply(this,arguments)}function I(){return(I=Object(E.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=_.load(T))&&t.length){e.next=5;break}return e.next=4,F();case 4:t=e.sent;case 5:return L=Object(S.a)(t),console.log("g",L),_.store(T,L),e.abrupt("return",L);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return A.apply(this,arguments)}function A(){return(A=Object(E.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://randomuser.me/api/?results=10",e.next=3,C.a.get("https://randomuser.me/api/?results=10");case 3:return(t=e.sent.data).results.forEach((function(e){return e._id=b.makeId()})),e.abrupt("return",t.results);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(E.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L;case 2:if(n=e.sent,(r=n).map((function(e){e.id.value||(e.id.value="")})),console.log("users",n),!t){e.next=12;break}return console.log("here",t),r=n.filter((function(e){if(e.id.value.toLowerCase().includes(t.id)&&e.email.toLowerCase().includes(t.email)&&(e.name.first.toLowerCase().includes(t.name)||e.name.last.toLowerCase().includes(t.name)||e.name.title.toLowerCase().includes(t.name))&&((e.location.street.number+"").includes(t.location)||e.location.street.name.toLowerCase().includes(t.location)||e.location.city.toLowerCase().includes(t.location)||e.location.country.toLowerCase().includes(t.location)))return e})),console.log("after",r),console.log("userToReturn",r),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(E.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L;case 2:n=e.sent,r=n.findIndex((function(e){return e._id===t})),n.splice(r,1),L=Object(S.a)(n),_.store(T,L);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(E.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L;case 2:return n=e.sent,r=n.find((function(e){return e._id===t})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(E.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L;case 2:return n=e.sent,console.log("gUsers",L),t._id?(r=n.findIndex((function(e){return e._id===t._id})),n.splice(r,1,t)):(t._id=b.makeId(),n.push(t)),L=n,_.store(T,L),e.abrupt("return",Promise.resolve(t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return function(){var t=Object(E.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.removeUser(e);case 2:n({type:"REMOVE_USER",userId:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function J(e){return console.log("userToSave",e),function(){var t=Object(E.a)(N.a.mark((function t(n){var r,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._id?"UPDATE_USER":"ADD_USER",t.next=3,U.save(e);case 3:a=t.sent,n({type:r,user:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var q=function(){var e=Object(l.c)((function(e){return e.userReducer})),t=e.users,n=e.filterBy,c=Object(l.b)();Object(a.useEffect)((function(){c(function(e){return function(){var t=Object(E.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.query(e);case 2:r=t.sent,n({type:"SET_USERS",users:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))}),[n]);var s=Object(a.useCallback)((function(e){return c(M(e))}),[M,c]);return Object(r.jsxs)("div",{className:"users",children:[Object(r.jsxs)("div",{className:" filter flex cloumn align-center space-around",children:[Object(r.jsx)(p,{onSetFilter:function(e){return c(function(e){return function(t){t({type:"SET_FILTER",filterBy:e})}}(e))}}),Object(r.jsx)("button",{className:"add-btn",children:Object(r.jsx)(u.b,{to:"/user/edit/",children:"Add New User"})})]}),Object(r.jsx)(y,{users:t,onDeleteUser:s})]})},V=n(26),Z=n.n(V);function X(e){var t,n,c,s=e.match,i=e.history,o=Object(a.useState)(null),l=Object(j.a)(o,2),u=l[0],d=l[1];if(Object(a.useEffect)((function(){(function(){var e=Object(E.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.params.id,e.next=3,U.getById(t);case 3:n=e.sent,d(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s.params]),!u)return Object(r.jsx)("div",{children:"Loading"});var m=(null===(t=u.picture)||void 0===t?void 0:t.large)?null===(n=u.picture)||void 0===n?void 0:n.large:x;return Object(r.jsxs)("div",{className:"user-deatilss",children:[Object(r.jsx)("button",{className:"close-btn",onClick:function(){return i.goBack()},children:Object(r.jsx)(Z.a,{})}),Object(r.jsx)("img",{src:m}),Object(r.jsx)("div",{className:" flex space-around align-center m-t-10",children:(null===(c=u.id)||void 0===c?void 0:c.value)&&Object(r.jsxs)("p",{children:["Id :",u.id.value]})}),Object(r.jsxs)("h2",{className:"m-t-10",children:[u.name.title.toUpperCase()," ",u.name.first," ",u.name.last]}),Object(r.jsxs)("p",{className:"m-t-10",children:["Email :",u.email]}),Object(r.jsxs)("p",{className:"m-t-10",children:["Phone :",u.phone]}),Object(r.jsx)("div",{className:"user-location m-t-10",children:Object(r.jsxs)("small",{children:["Location : ",u.location.country," ,",u.location.city," ,",u.location.street.name,u.location.street.number]})})]})}function $(e){var t,n,c=e.match,s=e.history,i=Object(a.useState)(null),o=Object(j.a)(i,2),u=o[0],p=o[1],b=Object(a.useState)(""),f=Object(j.a)(b,2),h=f[0],v=f[1],O=Object(l.c)((function(e){return e.userReducer})).users,g=Object(l.b)();Object(a.useEffect)((function(){var e=c.params.id;console.log("id",e),function(){var t=Object(E.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,U.getById(e);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=U.getEmptyUser();case 7:n=t.t0,p(n);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[c.params,p]);var y=function(){var e=Object(E.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),w()&&(g(J(u)),s.push("/"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e,t;return u.name.first&&u.name.last&&u.location.street.number&&u.location.street.name&&u.location.city&&u.location.country&&u.email?(null===(e=u.name)||void 0===e?void 0:e.first.length)<3||(null===(t=u.name)||void 0===t?void 0:t.last.length)<3?(v("Name must contain at least 3 characters!"),setTimeout((function(){v("")}),5e3),!1):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(u.email)?!O.find((function(e){return e.email===u.email&&e._id!==u._id}))||(v("This email address is already in use"),setTimeout((function(){v("")}),5e3),!1):(v("Invalid Email!"),setTimeout((function(){v("")}),5e3),!1):(v("all fields are require!"),setTimeout((function(){v("")}),5e3),!1)},S=function(e){var t=e.target.name,n=e.target.value,r=Object(m.a)({},u);r.name[t]=n,p(r)},k=function(e){var t=e.target.name,n=e.target.value,r=Object(m.a)({},u);r.location[t]=n,p(r)},C=function(e){var t=e.target.name,n=e.target.value,r=Object(m.a)({},u);r.location.street[t]=n,p(r)};if(!u)return Object(r.jsx)("div",{children:"loading"});var _=(null===(t=u.picture)||void 0===t?void 0:t.large)?null===(n=u.picture)||void 0===n?void 0:n.large:x;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("form",{className:"user-deatilss ",onSubmit:y,children:[Object(r.jsx)("button",{className:"close-btn",onClick:function(){return s.push("/")},children:Object(r.jsx)(Z.a,{})}),Object(r.jsx)("img",{src:_}),Object(r.jsx)("h3",{className:"msg",children:h}),Object(r.jsxs)("secrion",{className:"user-fields flex column",children:[Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"Title Name:"}),Object(r.jsx)("input",{type:"text",name:"title",placeholder:"Title Name",value:u.name.title,onChange:S})]}),Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"First Name:"}),Object(r.jsx)("input",{type:"text",name:"first",placeholder:"First Name",value:u.name.first,onChange:S})]}),Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"Last Name:"}),Object(r.jsx)("input",{type:"text",name:"last",placeholder:"Last Name",value:u.name.last,onChange:S})]}),Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"Street Name:"}),Object(r.jsx)("input",{type:"text",name:"name",placeholder:"Street Name",value:u.location.street.name,onChange:C})]}),Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"Street Number:"}),Object(r.jsx)("input",{type:"number",name:"number",placeholder:"Street Number",value:u.location.street.number,onChange:C})]}),Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"City:"}),Object(r.jsx)("input",{type:"text",name:"city",placeholder:"City",value:u.location.city,onChange:k})]}),Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"Country:"}),Object(r.jsx)("input",{type:"text",name:"country",placeholder:"Country",value:u.location.country,onChange:k})]}),Object(r.jsxs)("div",{className:"flex m-t-7 space-between",children:[Object(r.jsx)("label",{htmlFor:"",children:"Email:"}),Object(r.jsx)("input",{className:"email-input",type:"email",name:"email",placeholder:"Email",value:u.email,onChange:function(e){var t=e.target.name,n="number"===e.target.type?+e.target.value:e.target.value;p((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(d.a)({},t,n))}))}})]}),Object(r.jsx)("button",{className:"btn-save",children:"Save"})]})]})})}var z=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{path:"/user/edit/:id?",component:$}),Object(r.jsx)(o.a,{path:"/user/:id",component:X}),Object(r.jsx)(o.a,{path:"/",component:q})]})})},G=n(48),H=n(19),K={filterBy:{name:"",location:"",id:"",email:""},users:[]};var Q=Object(H.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{users:Object(S.a)(t.users)});case"REMOVE_USER":return Object(m.a)(Object(m.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"ADD_USER":return Object(m.a)(Object(m.a)({},e),{},{users:[].concat(Object(S.a)(e.users),[t.user])});case"UPDATE_USER":return Object(m.a)(Object(m.a)({},e),{},{users:e.users.map((function(e){return e._id===t.user._id?t.user:e}))});case"SET_FILTER":return Object(m.a)(Object(m.a)({},e),{},{filterBy:Object(m.a)({},t.filterBy)});default:return e}}}),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,ee=Object(H.e)(Q,Y(Object(H.a)(G.a))),te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}window.addEventListener("beforeinstallprompt",(function(e){console.log("beforeinstallprompt event has fired"),e.prompt()})),i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(l.a,{store:ee,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(z,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/user-app",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/user-app","/service-worker.js");te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ne(t,e)}))}}()}},[[83,1,2]]]);
//# sourceMappingURL=main.3542d4ed.chunk.js.map